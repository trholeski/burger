
<header>
  <div class="overlay"></div>
  <video playsinline="playsinline" autoplay="autoplay" muted="muted" loop="loop">
    <source src="/image/OVW2.mp4" type="video/mp4">
  </video>
<div id="welcome_text"  class="container h-100">
    <div class="d-flex text-center align-items-center">
      <div class="w-100 text-white">
        <p class="display-3">eat da burger</p>
      </div>
    </div>
</div>

</header>


<div class="container">
  <div class="row">
    <div class="col-8 offset-2">
      <form class="clearfix mb-4" action="POST">
        <div class="form-group">
          <label for="teamData-name"> {{msg}} </label>
          <input type="text" id="burger-name" class="form-control" aria-describedby="burger-name"
            placeholder="describe new burger">
        </div>
        <button id="submit" class="btn btn-primary float-right">Submit</button>
      </form>
      <h3 class='text-center'>LIST OF BURGERS</h3>
      <ul id="burger-list" class="list-group">
        {{#each burgers}}
        <li data-id="{{this.burger_name}}" class="list-group-item">
          <button class="btn btn-danger float-right delete">just EAT IT!!!</button>
        </li>
        {{/each}}
      </ul>


    </div>
  </div>
</div>



<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>


// Get references to page elements
var $burgerName = $("#burger-name");
//{{!-- devoured - boolean --}}
var $submitBtn = $("#submit");
var $burgerList = $("#burger-list");



// The API object contains methods for each kind of request we'll make
var API = {
  saveTeam: function (burgers) {
    return $.ajax({
      headers: {
        "Content-Type": "application/json"
      },
      type: "POST",
      url: "api/burgers/",
      data: JSON.stringify(burgers)
    });
  },
  getTeams: function () {
    return $.ajax({
      url: "api/burgers/",
      type: "GET"
    });
  },
  deleteTeam: function (id) {
    return $.ajax({
      url: "api/burgers/" + id,
      type: "DELETE"
    });
  }
};

// refreshTeamList gets new teams from the db and repopulates the list
var refreshTeamList = function () {
  API.getTeams().then(function (data) {
    var $burgers = data.map(function (burgers) {
      var $a = $("<a>")
        .text(burgers.burgers_name);

      var $li = $("<li>")
        .attr({
          class: "list-group-item",
          "data-id": burgers.id
        })
        .append($a);

      var $button = $("<button>")
        .addClass("btn btn-danger float-right delete")
        .text("just EAT IT!!!!!");

      $li.append($button);

      return $li;
    });

    $burgerList.empty();
    $burgerList.append($burgers);
  });
};


// handleFormSubmit is called whenever we submit a new team
// Save the new team to the db and refresh the list
var handleFormSubmit = function (event) {
  event.preventDefault();

  var burgers = {
    burger_name: $burger_name.val().trim(),
    //devoured: $devoured.boolean();
  };

  if (!burger) {
    alert("You must enter a burger name!");
    return;
  }

  API.saveTeam(burgers).then(function () {
    refreshTeamList();
  });

  $burger_name.val("");
};

// handleDeleteBtnClick is called when an team's delete button is clicked
// Remove the team from the db and refresh the list

var handleDeleteBtnClick = function () {
  var idToDelete = $(this).parent().attr("data-id");
  API.deleteTeam(idToDelete).then(function () {
    refreshTeamList();
  });
};






// Add event listeners to the submit and delete buttons
$submitBtn.on("click", handleFormSubmit);
$burgerList.on("click", ".delete", handleDeleteBtnClick);

</script>